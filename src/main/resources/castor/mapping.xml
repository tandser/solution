<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapping PUBLIC "-//EXOLAB/Castor Mapping DTD Version 1.0//EN" "http://castor.org/mapping.dtd">

<mapping>

    <!-- ru.tandser.solution.util.Users -->

    <class name="ru.tandser.solution.util.Users">
        <field name="users" type="ru.tandser.solution.domain.User" collection="arraylist">
            <bind-xml name="user"/>
        </field>
    </class>

    <!-- ru.tandser.solution.util.LocalDateTimeFieldHandler -->

    <field-handler name="userDateTimeHandler" class="ru.tandser.solution.util.LocalDateTimeFieldHandler">
        <param name="date-time-format" value="yyyy-MM-dd HH:mm"/>
    </field-handler>

    <!-- ru.tandser.solution.domain.User -->

    <class name="ru.tandser.solution.domain.User" identity="id">

        <map-to xml="user"/>

        <field name="id" type="integer">
            <bind-xml name="id" node="element"/>
        </field>

        <field name="name" type="string">
            <bind-xml name="name" node="element"/>
        </field>

        <field name="email" type="string">
            <bind-xml name="email" node="element"/>
        </field>

        <field name="password" type="string">
            <bind-xml name="password" node="element"/>
        </field>

        <field name="created" type="string" handler="userDateTimeHandler">
            <bind-xml name="created" node="element"/>
        </field>

        <field name="role" type="ru.tandser.solution.domain.Role">
            <bind-xml name="role" node="element"/>
        </field>

        <field name="normOfCalories" type="integer">
            <bind-xml name="norm-of-calories" node="element"/>
        </field>

    </class>

    <!-- ru.tandser.solution.util.Meals -->

    <class name="ru.tandser.solution.util.Meals">
        <field name="meals" type="ru.tandser.solution.domain.Meal" collection="arraylist">
            <bind-xml name="meal"/>
        </field>
    </class>

    <!-- ru.tandser.solution.util.LocalDateTimeFieldHandler -->

    <field-handler name="mealDateTimeHandler" class="ru.tandser.solution.util.LocalDateTimeFieldHandler">
        <param name="date-time-format" value="yyyy-MM-dd HH:mm"/>
    </field-handler>

    <!-- ru.tandser.solution.domain.Meal -->

    <class name="ru.tandser.solution.domain.Meal" identity="id">

        <map-to xml="meal"/>

        <field name="id" type="integer">
            <bind-xml name="id" node="element"/>
        </field>

        <field name="dateTime" type="string" handler="mealDateTimeHandler">
            <bind-xml name="date-time" node="element"/>
        </field>

        <field name="description" type="string">
            <bind-xml name="description" node="element"/>
        </field>

        <field name="calories" type="integer">
            <bind-xml name="calories" node="element"/>
        </field>

        <field name="user" type="ru.tandser.solution.domain.User">
            <bind-xml name="user" node="element"/>
        </field>

    </class>

</mapping>